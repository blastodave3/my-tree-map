<!DOCTYPE html>
<html lang="en">
<head>
Â Â Â Â <meta charset="UTF-8">
Â Â Â Â <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â Â Â Â <title>Tree Inventory Project</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
Â Â Â Â <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
Â Â Â Â <style>
Â Â Â Â Â Â Â Â body { font-family: sans-serif; margin: 40px; line-height: 1.6; color: #333; }
Â Â Â Â Â Â Â Â .container { max-width: 800px; margin: auto; }
Â Â Â Â Â Â Â Â .config-status { padding: 10px; background: #f4f4f4; border-radius: 5px; }
Â Â Â Â </style>
</head>
<body>
Â Â Â Â <div class="container">
Â Â Â Â Â Â Â Â <h1>ðŸŒ³ My Tree Mapping Project</h1>
Â Â Â Â Â Â Â Â <p>This site connects to my Supabase database to display tree points and GIS data.</p>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <div class="config-status">
Â Â Â Â Â Â Â Â Â Â Â Â <strong>Database Connection:</strong>Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span id="status">Connecting...</span>
Â Â Â Â Â Â Â Â </div>
<div id="map" style="height: 500px; width: 100%; margin-top: 20px;"></div>
Â Â Â Â </div>
â€¨
Â Â Â <script>
  const SUPABASE_URL = "https://wintsbrxqxezfpxwvtxx.supabase.co";
    Â Â const SUPABASE_ANON_KEY = "sb_publishable_3nxL_MQpLTbhBFN64YA8vA_tawKXsKM";

    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Initialize the map centered on a general area
        const map = L.map('map').setView([0, 0], 2);

        // Add the map background (tiles)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap'
        }).addTo(map);

        async function loadTrees() {
            // Get data from your table
            const { data: trees, error } = await supabaseClient
                .from('tree_points')
                .select('latitude, longitude, name');

            if (error) {
                console.error("Database error:", error.message);
                return;
            }

            if (trees && trees.length > 0) {
                const markerList = [];

                trees.forEach(tree => {
                    if (tree.latitude && tree.longitude) {
                        const marker = L.marker([tree.latitude, tree.longitude])
                            .addTo(map)
                            .bindPopup(`<b>Tree:</b> ${tree.name || 'Unnamed Tree'}`);
                        
                        markerList.push(marker);
                    }
                });

                // Zoom the map to fit the trees you found
                const group = new L.featureGroup(markerList);
                map.fitBounds(group.getBounds());
            } else {
                console.log("No trees found in your database table.");
            }
        }

        loadTrees();
    </script>
</body>
</html>

